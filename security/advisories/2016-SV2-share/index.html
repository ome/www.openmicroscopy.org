---
layout: security-advisory
filename: security
title: 2016-SV2 Share
main-blurb: affects OMERO versions 5.2.4 and earlier
---          
                
        <!-- begin SecVul -->
        <hr class="whitespace">
        <div class="secvul-row row">
            <div class="small-12 medium-3 columns">
                <h3 class="secvul-heading"><i class="fa fa-th-list"></i> Synopsis</h3>
            </div>
            <div class="small-12 medium-9 columns">
                <p class="secvul-description">Improper Access Control Vulnerability.</p>
                <p class="secvul-description">The OMERO.shares system bypasses intended security restrictions and grants elevated privileges to read otherwise-restricted data.</p>
            </div>
        </div>
        <div class="secvul-row row">
            <div class="small-12 medium-3 columns">
                <h3 class="secvul-heading"><i class="fa fa-history"></i> Background</h3>
            </div>
            <div class="small-12 medium-9 columns">
                <p class="secvul-description">A user can retrieve data belonging to users across all groups by using the API. The user must be able to authenticate remotely using the standard 4063 and 4064 ports and have exploit code to make use of the vulnerability.</p>
            </div>
        </div>
        <div class="secvul-row row">
            <div class="small-12 medium-3 columns">
                <h3 class="secvul-heading"><i class="fa fa-archive"></i> Affected Packages</h3>
            </div>
            <div class="small-12 medium-9 columns">
                <p class="secvul-description">OMERO.server up to and including 5.2.4.</p>
            </div>
        </div>
        <div class="secvul-row row">
            <div class="small-12 medium-3 columns">
                <h3 class="secvul-heading"><i class="fa fa-exclamation-triangle"></i> Impact</h3>
            </div>
            <div class="small-12 medium-9 columns">
                <p class="secvul-description">High severity.</p>
                <p class="secvul-description"><a href="https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N" target="_blank">CVSS score 6.5 medium CVSS vector AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N</a></p>
                <p class="secvul-description">Any user is able to gain read-only access to resources that should not be accessible by creating a 'Share'.</p>
            </div>
        </div>
        <div class="secvul-row row">
            <div class="small-12 medium-3 columns">
                <h3 class="secvul-heading"><i class="fa fa-lightbulb-o"></i> Workaround</h3>
            </div>
            <div class="small-12 medium-9 columns">
                <p class="secvul-description">Use either of the provided SQL scripts to delete all shares and disable the creation of shares:</p>
                <ul>
                    <li><a href="https://raw.githubusercontent.com/openmicroscopy/openmicroscopy/v5.2.5/sql/psql/OMERO5.2__0/OMERO5.2-delete-and-disable-shares.sql" target="_blank">OMERO5.2-delete-and-disable-shares.sql</a> (5.2), or</li>
                    <li><a href="https://raw.githubusercontent.com/openmicroscopy/openmicroscopy/v5.2.5/sql/psql/OMERO5.1__1/OMERO5.1-delete-and-disable-shares.sql" target="_blank">OMERO5.1-delete-and-disable-shares.sql</a> (5.1).</li>
                </ul>
                <p class="secvul-description">These scripts can be run against a running server with no downtime. If you are not actively using the shares functionality, this is a safe course of action. To see if your users have created any shares use:</p>
                <pre><code class="html">psql omero -c "select count(*) from share"</code></pre>
                <p class="secvul-description">Users who would like to save their existing shares for a later upgrade should do so <strong>before</strong> running the "delete-and-disable" script.</p>
            </div>
        </div>
        <div class="secvul-row row">
            <div class="small-12 medium-3 columns">
                <h3 class="secvul-heading"><i class="fa fa-check"></i> Resolution</h3>
            </div>
            <div class="small-12 medium-9 columns">
                <p class="secvul-description">All OMERO.servers should be upgraded to at least 5.2.5. With this version, both existing and new shares do not exhibit the vulnerability. Shares now, however, <strong>only</strong> support images, as is common when creating shares from OMERO.web.</p>
            </div>
        </div>
        
        
        <!-- end SecVul -->
        <hr class="whitespace">
